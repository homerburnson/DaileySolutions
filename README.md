# Node OpenAI App

This is a full-stack Node.js application that integrates with OpenAI's API to generate dynamic responses based on user input. The project includes a backend powered by Express.js and a frontend built with vanilla JavaScript and HTML. It incorporates a Qdrant database and uses a **Retrieval-Augmented Generation (RAG)** model to enhance responses with relevant context.

---

## Overview

- **Backend**: Manages API requests, file uploads, and communication with OpenAI.
- **Frontend**: Provides a user interface for querying the AI, uploading files, and interacting with the app.
- **Use Case**: Designed to showcase CVs, cover letters, and job application materials, with the ability to query OpenAI and manage content.

---

## Project Structure

```
node-openai-app/
├── backend/
│   ├── texts/                # Uploaded files: CVs, cover letters, job descriptions, and more
│   │   ├── bio/              # Biography files (e.g., bio.txt)
│   │   ├── covers/           # Cover letter files (e.g., Standard cover letter)
│   │   ├── cv/               # CV files (e.g., Standard CV)
│   │   ├── company/          # Company-specific files
│   │   ├── jobs/             # Job description files
│   │   └── user/             # User-specific files
│   ├── routes/               # Express route handlers
│   │   ├── api.js            # Handles OpenAI API requests and Qdrant interactions
│   │   └── upload.js         # Handles file uploads and management
│   ├── server.js             # Express server entry point
│   └── logger.js             # Centralized logging configuration
├── frontend/
│   ├── public/               # Public assets and frontend logic
│   │   ├── cv_public/        # Folder to insert publicly downloadable CV in .pdf form  
│   │   ├── index.html        # Main frontend UI
│   │   ├── upload.html       # Upload and file management page
│   │   ├── styles/           # CSS styling
│   │   │   └── App.css       # Main stylesheet
│   │   ├── images/           # Static assets
│   │   │   ├── profile.jpg   # Profile image
│   │   │   ├── background.png # Background image for the UI
│   │   │   └── background2.png # Background image for dark mode
│   │   └── favicon.ico       # Favicon for the app
│   └── views/                # EJS templates for dynamic rendering
│       ├── index.ejs         # Main page template
│       └── upload.ejs        # Upload page template
├── .env                      # Environment variables for the project
├── .env.example              # Example environment variables
├── package.json              # Combined dependencies and scripts for the entire project
├── package-lock.json         # Lockfile for dependencies
├── README.md                 # Project documentation
└── .gitignore                # Git ignore file
```

---

## Getting Started

### Requirements

- Node.js (v14 or newer)
- npm (Node package manager)

### Installation

1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd node-openai-app
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

3. Set up the `.env` file:
   - Copy the `.env.example` file to `.env`:
     ```bash
     cp .env.example .env
     ```
   - Update the `.env` file with your configuration:
     - `OPENAI_API_KEY`: Your OpenAI API key.
     - `CLUSTERURL`: Your Qdrant cluster URL.
     - `DBSECRET`: Your Qdrant API key.
     - `NAME`, `TITLE`, `BRAND`, `LOCATION`: User-specific details.

---

## Running the App

1. Start the backend server:
   ```bash
   npm start
   ```

2. Open the frontend:
   - Open `http://localhost:3000` in your browser.

---

## Features

- **Retrieval-Augmented Generation (RAG)**: Combines OpenAI's generative capabilities with relevant context retrieved from a vector database (Qdrant). This ensures responses are accurate, context-aware, and tailored to the user's query.
- **Query OpenAI**: Enter a prompt and receive a response generated by the OpenAI model.
- **Dynamic Context**: The app dynamically includes CV, cover letter, and job description text files in the OpenAI context window based on a keyword.
- **Download CV**: A button allows users to download the CV from the `cv_public` folder.
- **File Upload**: Upload `.txt` files to specific folders (`bio`, `covers`, `cv`, `jobs`, `company`, `user`) via the `/uploaddocs` page.
- **File Management**: View, edit, and delete uploaded files directly from the `/uploaddocs` page.
- **Embedding Generation**: Generate sets of embeddings for uploaded files using OpenAI's embedding model and store them in the Qdrant vector database.
- **Dynamic Context Loading**: Dynamically loads relevant files into the OpenAI context based on a keyword passed as a Base64-encoded query parameter.
- **Session History**: Maintains a conversation history for each session, allowing OpenAI to respond with context-aware answers.

---

## License

This project is licensed under the MIT License.